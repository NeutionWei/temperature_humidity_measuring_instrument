C51 COMPILER V9.52.0.0   DISPLAY                                                           04/23/2019 16:49:33 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE DISPLAY
OBJECT MODULE PLACED IN .\output\display.obj
COMPILER INVOKED BY: D:\Keil_v4\C51\BIN\C51.EXE source\display.c BROWSE INCDIR(.\include) DEBUG OBJECTEXTEND PRINT(.\dis
                    -play.lst) TABS(2) OBJECT(.\output\display.obj)

line level    source

   1          #include "display.h"
   2          #include "oled.h"
   3          #include "bmp.h"
   4          #include "detect.h"
   5          #include "key.h"
   6          
   7          void Disp_Init()
   8          {
   9   1        OLED_Init();      // OLED初始化
  10   1        OLED_Clear();     // OLED清屏
  11   1        OLED_ShowCHinese(0,  0, 4); // “时”
  12   1        OLED_ShowCHinese(16, 0, 5); // “间”
  13   1        OLED_ShowChar(32, 0, ':');
  14   1        OLED_ShowChar(48, 0, '-');
  15   1        OLED_ShowChar(56, 0, '-');
  16   1        OLED_ShowChar(64, 0, ':');
  17   1        OLED_ShowChar(72, 0, '-');
  18   1        OLED_ShowChar(80, 0, '-');
  19   1        OLED_ShowChar(88, 0, ':');
  20   1        OLED_ShowChar(96, 0, '-');
  21   1        OLED_ShowChar(104,0, '-');
  22   1        OLED_ShowCHinese(0,  3, 0); // “温”
  23   1        OLED_ShowCHinese(16, 3, 1); // “度”
  24   1        OLED_ShowChar(32, 3, ':');
  25   1        OLED_ShowChar(48, 3, '-');
  26   1        OLED_ShowChar(56, 3, '-');
  27   1        //OLED_ShowChar(64, 3, '.');
  28   1        //OLED_ShowChar(72, 3, '-');
  29   1        //OLED_ShowChar(80, 3, '-');
  30   1        //OLED_ShowChar(96-24, 3, 'C');
  31   1        OLED_ShowCHinese(96-24, 3, 6);  // “度”
  32   1        OLED_ShowCHinese(0,  6, 2); // “湿”
  33   1        OLED_ShowCHinese(16, 6, 3); // “度”
  34   1        OLED_ShowChar(32, 6, ':');
  35   1        OLED_ShowChar(48, 6, '-');
  36   1        OLED_ShowChar(56, 6, '-');
  37   1        //OLED_ShowChar(64, 6, '.');
  38   1        //OLED_ShowChar(72, 6, '-');
  39   1        //OLED_ShowChar(80, 6, '-');
  40   1        //OLED_ShowChar(96-24, 6, '%');
  41   1        OLED_ShowChar(96-24, 6, 'R');
  42   1        OLED_ShowChar(104-24,6, 'H');
  43   1      }
  44          
  45          void Disp_Data()
  46          {
  47   1        static unsigned int delay_hour;
  48   1        static unsigned int delay_min;
  49   1        static unsigned int delay_sec;
  50   1        
  51   1        /*//OLED_Clear();
  52   1        
  53   1        // 时间显示
  54   1        OLED_ShowNum(48, 0, DS1302_Data[0], 1, 16);
C51 COMPILER V9.52.0.0   DISPLAY                                                           04/23/2019 16:49:33 PAGE 2   

  55   1        OLED_ShowNum(56, 0, DS1302_Data[1], 1, 16);
  56   1        //OLED_ShowChar(45, 2, ':');
  57   1        OLED_ShowNum(72, 0, DS1302_Data[2], 1, 16);
  58   1        OLED_ShowNum(80, 0, DS1302_Data[3], 1, 16);
  59   1        //OLED_ShowChar(75, 2, ':');  
  60   1        OLED_ShowNum(96, 0, DS1302_Data[4], 1, 16);
  61   1        OLED_ShowNum(104,0, DS1302_Data[5], 1, 16);
  62   1      */
  63   1        
  64   1        // 按键调整显示
  65   1        if(Flag_key_menu == MENU_NoADJ)
  66   1        {
  67   2          // 时间显示
  68   2          OLED_ShowNum(48, 0, DS1302_Data[0], 1, 16);
  69   2          OLED_ShowNum(56, 0, DS1302_Data[1], 1, 16);
  70   2          //OLED_ShowChar(45, 2, ':');
  71   2          OLED_ShowNum(72, 0, DS1302_Data[2], 1, 16);
  72   2          OLED_ShowNum(80, 0, DS1302_Data[3], 1, 16);
  73   2          //OLED_ShowChar(75, 2, ':');  
  74   2          OLED_ShowNum(96, 0, DS1302_Data[4], 1, 16);
  75   2          OLED_ShowNum(104,0, DS1302_Data[5], 1, 16);
  76   2        }
  77   1        else if(Flag_key_menu == MENU_ADJ_HOUR)
  78   1        {
  79   2          if(++delay_hour >= 50)
  80   2            delay_hour = 0;
  81   2          
  82   2          if(delay_hour <= 25)
  83   2          {
  84   3            // 时间显示
  85   3            OLED_ShowNum(48, 0, DS1302_Data_Tmp[0], 1, 16);
  86   3            OLED_ShowNum(56, 0, DS1302_Data_Tmp[1], 1, 16);
  87   3            //OLED_ShowChar(45, 2, ':');
  88   3            OLED_ShowNum(72, 0, DS1302_Data_Tmp[2], 1, 16);
  89   3            OLED_ShowNum(80, 0, DS1302_Data_Tmp[3], 1, 16);
  90   3            //OLED_ShowChar(75, 2, ':');  
  91   3            OLED_ShowNum(96, 0, DS1302_Data_Tmp[4], 1, 16);
  92   3            OLED_ShowNum(104,0, DS1302_Data_Tmp[5], 1, 16);
  93   3          }
  94   2          else
  95   2          {
  96   3            //OLED_ShowNum(48, 0, DS1302_Data_Tmp[0], 1, 16);
  97   3            //OLED_ShowNum(56, 0, DS1302_Data_Tmp[1], 1, 16);
  98   3            OLED_ShowChar(48, 0, ' ');
  99   3            OLED_ShowChar(56, 0, ' ');
 100   3            OLED_ShowNum(72, 0, DS1302_Data_Tmp[2], 1, 16);
 101   3            OLED_ShowNum(80, 0, DS1302_Data_Tmp[3], 1, 16);
 102   3            //OLED_ShowChar(75, 2, ':');  
 103   3            OLED_ShowNum(96, 0, DS1302_Data_Tmp[4], 1, 16);
 104   3            OLED_ShowNum(104,0, DS1302_Data_Tmp[5], 1, 16);
 105   3          }
 106   2        }
 107   1        else if(Flag_key_menu == MENU_ADJ_MIN)
 108   1        {
 109   2          if(++delay_min >= 50)
 110   2            delay_min = 0;
 111   2          
 112   2          if(delay_min <= 25)
 113   2          {
 114   3            // 时间显示
 115   3            OLED_ShowNum(48, 0, DS1302_Data_Tmp[0], 1, 16);
 116   3            OLED_ShowNum(56, 0, DS1302_Data_Tmp[1], 1, 16);
C51 COMPILER V9.52.0.0   DISPLAY                                                           04/23/2019 16:49:33 PAGE 3   

 117   3            //OLED_ShowChar(45, 2, ':');
 118   3            OLED_ShowNum(72, 0, DS1302_Data_Tmp[2], 1, 16);
 119   3            OLED_ShowNum(80, 0, DS1302_Data_Tmp[3], 1, 16);
 120   3            //OLED_ShowChar(75, 2, ':');  
 121   3            OLED_ShowNum(96, 0, DS1302_Data_Tmp[4], 1, 16);
 122   3            OLED_ShowNum(104,0, DS1302_Data_Tmp[5], 1, 16);
 123   3          }
 124   2          else
 125   2          {
 126   3            OLED_ShowNum(48, 0, DS1302_Data_Tmp[0], 1, 16);
 127   3            OLED_ShowNum(56, 0, DS1302_Data_Tmp[1], 1, 16);
 128   3            OLED_ShowChar(72, 0, ' ');
 129   3            OLED_ShowChar(80, 0, ' ');
 130   3            //OLED_ShowNum(72, 0, DS1302_Data_Tmp[2], 1, 16);
 131   3            //OLED_ShowNum(80, 0, DS1302_Data_Tmp[3], 1, 16);
 132   3            //OLED_ShowChar(75, 2, ':');  
 133   3            OLED_ShowNum(96, 0, DS1302_Data_Tmp[4], 1, 16);
 134   3            OLED_ShowNum(104,0, DS1302_Data_Tmp[5], 1, 16);
 135   3          }
 136   2        }
 137   1        else if(Flag_key_menu == MENU_ADJ_SEC)
 138   1        {
 139   2          if(++delay_sec >= 50)
 140   2            delay_sec = 0;
 141   2          
 142   2          if(delay_sec <= 25)
 143   2          {
 144   3            // 时间显示
 145   3            OLED_ShowNum(48, 0, DS1302_Data_Tmp[0], 1, 16);
 146   3            OLED_ShowNum(56, 0, DS1302_Data_Tmp[1], 1, 16);
 147   3            //OLED_ShowChar(45, 2, ':');
 148   3            OLED_ShowNum(72, 0, DS1302_Data_Tmp[2], 1, 16);
 149   3            OLED_ShowNum(80, 0, DS1302_Data_Tmp[3], 1, 16);
 150   3            //OLED_ShowChar(75, 2, ':');  
 151   3            OLED_ShowNum(96, 0, DS1302_Data_Tmp[4], 1, 16);
 152   3            OLED_ShowNum(104,0, DS1302_Data_Tmp[5], 1, 16);
 153   3          }
 154   2          else
 155   2          {
 156   3            OLED_ShowNum(48, 0, DS1302_Data_Tmp[0], 1, 16);
 157   3            OLED_ShowNum(56, 0, DS1302_Data_Tmp[1], 1, 16);
 158   3            OLED_ShowChar(96, 0, ' ');
 159   3            OLED_ShowChar(104, 0, ' ');
 160   3            OLED_ShowNum(72, 0, DS1302_Data_Tmp[2], 1, 16);
 161   3            OLED_ShowNum(80, 0, DS1302_Data_Tmp[3], 1, 16);
 162   3            //OLED_ShowChar(75, 2, ':');  
 163   3            //OLED_ShowNum(96, 0, DS1302_Data_Tmp[4], 1, 16);
 164   3            //OLED_ShowNum(104,0, DS1302_Data_Tmp[5], 1, 16);
 165   3          }
 166   2        }
 167   1        
 168   1        if(Flag_detect_data2)
 169   1        {
 170   2          //Flag_detect_data = 0;
 171   2          // 温度显示
 172   2          OLED_ShowNum(48, 3, DHT11_Data[2], 1, 16);
 173   2          OLED_ShowNum(56, 3, DHT11_Data[3], 1, 16);
 174   2          //OLED_ShowNum(72, 3, DHT11_Data[3]/10, 1, 16);
 175   2          //OLED_ShowNum(80, 3, DHT11_Data[3]%10, 1, 16);
 176   2        }
 177   1        if(Flag_detect_data1)
 178   1        {
C51 COMPILER V9.52.0.0   DISPLAY                                                           04/23/2019 16:49:33 PAGE 4   

 179   2          // 湿度显示
 180   2          OLED_ShowNum(48, 6, DHT11_Data[0], 1, 16);
 181   2          OLED_ShowNum(56, 6, DHT11_Data[1], 1, 16);
 182   2          //OLED_ShowNum(72, 6, DHT11_Data[1]/10, 1, 16);
 183   2          //OLED_ShowNum(80, 6, DHT11_Data[1]%10, 1, 16);
 184   2        }
 185   1      /*OLED_Clear();
 186   1        OLED_ShowCHinese(0,0,0);//中
 187   1        OLED_ShowCHinese(18,0,1);//景
 188   1        OLED_ShowCHinese(36,0,2);//园
 189   1        OLED_ShowCHinese(54,0,3);//电
 190   1        OLED_ShowCHinese(72,0,4);//子
 191   1        OLED_ShowCHinese(90,0,5);//科
 192   1        OLED_ShowCHinese(108,0,6);//技
 193   1        OLED_ShowString(0,2,"1.3' OLED TEST");
 194   1        OLED_ShowString(8,2,"ZHONGJINGYUAN");  
 195   1        OLED_ShowString(20,4,"2014/05/01"); */ 
 196   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    979    ----
   CONSTANT SIZE    =   2048    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
